<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= @title %></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <style type="text/css">
      h1 {
        margin: 0.5em 0;
      }
      p {
        margin: 0.5em 0 0.1em 0;
        font-weight: 300;
      }
      .plain blockquote {
        background: none;
        border-left: none;
        padding: 0px;
      }
      blockquote p {
        margin: 0;
        font-size: 14px;
      }
      .plain li p {
        margin: 3px 0;
      }
      .plain ul {
        margin-bottom: 0;
      }
      code {
        font-family: "Source Sans Pro", sans-serif;
        font-size: 1em;
        line-height: 1.45;
        background-color: transparent;
        padding: 0px;
        color: SeaGreen;
        font-weight: bold;
      }
      .plain strong {
        font-weight: 300;
      }
      .plain ul
      {
        list-style-type: none;
      }
      blockquote {
        margin: 0px 0px 1px 20px;
        padding: 2px 5px;
        background: #FAFAFA;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row">
    	<div class="col-md-6 plain">
          <h1><%= @title %> A</h1>
          <p>The people disagree on these points:</p>
          <% summary.counter_points.each do |point, counter| %>
            <% #point = Condense.condense_group([point["String"], counter["String"]]) %>
            <% point = [point["String"], counter["String"]] %>
            <% if point.size == 2 %>
              <blockquote>
                <p>
                  <%= Presenter.clean(point.first, false) %>
                  <!-- <strong> vs. </strong> -->
                  <% # Presenter.clean(point.last, summary.topics) %>
                </p>
              </blockquote>
            <% else %>
              <blockquote><p><%= Presenter.clean(point.first, false) %></p></blockquote>
            <% end %>
          <% end %>    

          <!-- <p>The following <strong>negated points</strong> were discussed:</p> -->
          <% summary.negated_points.each do |_, first, _| %>
            <blockquote>
              <p><%= Presenter.clean(first["String"], false) %></p>
            </blockquote>
          <% end %>    

          <p>These are examples of common <strong>pairs of points raised by the same user</strong>:</p>
          <% summary.related_points.each do |point, related| %>
            <blockquote>
              <p>
                <%= Presenter.clean(point["String"], false) %>
                <strong> & </strong>
                <%= Presenter.clean(related["String"], false) %>
              </p>
            </blockquote>
          <% end %>    

          <p>Other <strong>commonly occurring points</strong> made in the discussion were:</p>
          <% summary.common_points.each do |point| %>
            <blockquote>
              <p><%= Presenter.clean(point["String"], false) %></p>
            </blockquote>
          <% end %>    

          <p>Common points made in the discussion that <strong>link concepts</strong> were:</p>
          <% summary.longer_points.each do |point| %>
            <blockquote>
              <p><%= Presenter.clean(point["String"], false) %></p>
            </blockquote>
          <% end %>    

          <p>Points for <strong>commonly discussed topics</strong>:</p>
          <ul>
            <% summary.commonly_discussed_topic_points.each do |topic, points| %>
              <li>
                <p><%= topic.capitalize %>
                <% #Condense.condense_group(points.map { |p| Presenter.clean(p["String"]) }).each do |point| %>
                <% points.map { |p| Presenter.clean(p["String"]) }.take(@summary.point_count).each do |point| %>
                  <blockquote>
                    <p><%= Presenter.clean(point, false) %></p>
                  </blockquote>
                <% end%>
              </li>
            <% end %>
          </ul>    

          <p>Points about <strong>multiple topics</strong>:</p>
          <% summary.multiple_topic_points.each do |point| %>
            <blockquote>
              <p><%= Presenter.clean(point["String"], false) %></p>
            </blockquote>
          <% end %>    

          <p>People ask <strong>questions</strong> like:</p>
          <% summary.question_points.each do |point| %>
            <blockquote>
              <p><%= Presenter.clean(point["String"], true) %></p>
            </blockquote>
          <% end %>    

          <% if false %>
            <hr/>
            <% meta = summary.metadata %>
            <p>
              Summary based on
              <strong><%= meta[:points] %> points</strong> from
              <strong><%= meta[:posts] %> posts</strong>. There were
              <strong><%= meta[:groups]%> groups</strong> of equivalent points.
            </p>
          <% end %>
        </div>

        <div class="col-md-6 formatted">
          <h1><%= @title %> A</h1>
          <p>The people disagree on these points:</p>
          <% summary.counter_points.each do |point, counter| %>
            <% point = [point["String"], counter["String"]] %>
            <% if point.size == 2 %>
              <blockquote>
                <p>
                  <%= Presenter.full_format(point.first, summary.topics) %>
                </p>
              </blockquote>
            <% else %>
              <blockquote><p><%= Presenter.full_format(point.first, summary.topics) %></p></blockquote>
            <% end %>
          <% end %>    

          <!-- <p>The following <strong>negated points</strong> were discussed:</p> -->
          <% summary.negated_points.each do |_, first, _| %>
            <blockquote>
              <p><%= Presenter.full_format(first["String"], summary.topics) %></p>
            </blockquote>
          <% end %>    

          <p>These are examples of common <strong>pairs of points raised by the same user</strong>:</p>
          <% summary.related_points.each do |point, related| %>
            <blockquote>
              <p>
                <%= Presenter.full_format(point["String"], summary.topics) %>
                <strong> & </strong>
                <%= Presenter.full_format(related["String"], summary.topics) %>
              </p>
            </blockquote>
          <% end %>    

          <p>Other <strong>commonly occurring points</strong> made in the discussion were:</p>
          <% summary.common_points.each do |point| %>
            <blockquote>
              <p><%= Presenter.full_format(point["String"], summary.topics) %></p>
            </blockquote>
          <% end %>    

          <p>Common points made in the discussion that <strong>link concepts</strong> were:</p>
          <% summary.longer_points.each do |point| %>
            <blockquote>
              <p><%= Presenter.full_format(point["String"], summary.topics) %></p>
            </blockquote>
          <% end %>    

          <p>Points for <strong>commonly discussed topics</strong>:</p>
          <ul>
            <% summary.commonly_discussed_topic_points.each do |topic, points| %>
              <li>
                <p><%= topic.capitalize %>
                <% points.map { |p| Presenter.clean(p["String"]) }.take(@summary.point_count).each do |point| %>
                  <blockquote>
                    <p><%= Presenter.full_format(point, summary.topics) %></p>
                  </blockquote>
                <% end%>
              </li>
            <% end %>
          </ul>    

          <p>Points about <strong>multiple topics</strong>:</p>
          <% summary.multiple_topic_points.each do |point| %>
            <blockquote>
              <p><%= Presenter.full_format(point["String"], summary.topics) %></p>
            </blockquote>
          <% end %>    

          <p>People ask <strong>questions</strong> like:</p>
          <% summary.question_points.each do |point| %>
            <blockquote>
              <p><%= Presenter.full_format(point["String"], summary.topics, true) %></p>
            </blockquote>
          <% end %>    

          <% if false %>
            <hr/>
            <% meta = summary.metadata %>
            <p>
              Summary based on
              <strong><%= meta[:points] %> points</strong> from
              <strong><%= meta[:posts] %> posts</strong>. There were
              <strong><%= meta[:groups]%> groups</strong> of equivalent points.
            </p>
          <% end %>
        </div>
      </div>
    </div>
  </body>
</html>
